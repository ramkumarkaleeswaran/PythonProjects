import urllib.request
import json
import datetime

nasaurl = "https://api.nasa.gov/planetary/apod?api_key=VYHN4haEollBnXUpHUujqZIqrZfU6GsXJG67b2xe";

response = urllib.request.urlopen(nasaurl);

content = response.read();
#get the json response

data = json.loads(content.decode("utf8"));
#decode as utf8

data_string = json.dumps(data);
#get it as string


data_load = json.loads(data_string);
#load the json into python string for futher processing

maxCommits=0;
CommitOndaysOfWeek = [0,0,0,0,0,0,0];

for index in range(len(data_load)):
    
    for index2 in range(0,7):
        CommitOndaysOfWeek[index2] = CommitOndaysOfWeek[index2]+data_load[index]['days'][index2];
        
    
    if data_load[index]['total'] > maxCommits :
        maxCommits = data_load[index]['total'];
        maxCommitsWeek=data_load[index]['week'];
        maxCommitsIndex=index;

    


print('Week in the last year had the greatest number of commits = ', datetime.datetime.fromtimestamp(int(maxCommitsWeek)));
# convert the unix time stamp to readable string and print the value

print('Day of the week that had the most commits = ',CommitOndaysOfWeek.index(max(CommitOndaysOfWeek)));     
# print the index of the array which has the max value

print('Aggregate commits per day from Sunday to Saturday = ',CommitOndaysOfWeek);
# print the aggregate commits for each day of the week. 
